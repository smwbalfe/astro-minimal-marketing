---
import { Image } from 'astro:assets';
import type { CollectionEntry } from 'astro:content';
import Footer from '../components/Footer.astro';
import FormattedDate from '../components/FormattedDate.astro';
import Header from '../components/Header.astro';
import Layout from './Layout.astro';
import Prose from '../components/Prose.astro';

type Props = CollectionEntry<'blog'>['data'];

const { title, description, pubDate, updatedDate, heroImage, categories } = Astro.props;
---

<Layout metadata={{ title, description }}>
	<Header />
	<main class="flex-1">
		<article class="section-padding">
			<div class="container">
				<div class="max-w-4xl mx-auto">
					{heroImage && (
						<div class="mb-8">
							<Image
								width={1020}
								height={510}
								src={heroImage}
								alt={title}
								class="w-full rounded-xl shadow-lg aspect-video object-cover"
							/>
						</div>
					)}

					<header class="mb-8 text-center">
						<div class="mb-4 text-sm text-gray-500">
							<FormattedDate date={pubDate} />
							{updatedDate && (
								<span class="ml-2 italic">
									â€¢ Updated on <FormattedDate date={updatedDate} />
								</span>
							)}
						</div>
						<h1 class="text-4xl md:text-5xl font-bold text-gray-900 mb-4">{title}</h1>
						{description && (
							<p class="text-xl text-gray-600 max-w-2xl mx-auto mb-6">{description}</p>
						)}
						<div class="flex flex-wrap justify-center gap-2">
							{categories && categories.map(category => (
								<a
									href={`/blog/category/${category}`}
									class="px-3 py-1 text-sm bg-orange-100 text-orange-700 rounded-full hover:bg-orange-200 transition-colors no-underline"
								>
									{category}
								</a>
							))}
						</div>
					</header>

					<Prose>
						<slot />
					</Prose>
				</div>
			</div>
		</article>
	</main>
	<Footer />
</Layout>

